{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/hide-on-scroll.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","defaultOptions","delay","position","selector","classHidden","classLocked","_instanceCount","_isScrollingUpwards","_scrollPosition","window","scrollY","pageYOffset","assign","target","firstSource","TypeError","to","Object","arguments","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","enumerable","HideOnScroll","_this","this","options","_classCallCheck","_options","_items","nodeList","document","querySelectorAll","push","HideOnScrollItem","addEventListener","refresh","element","className","body","classList","add","remove","parent","_this2","_parent","_element","_setOptionInt","_mouseOver","documentElement","onMouseMove","clearTimeout","_timeoutId","contains","_this3","y","getBoundingClientRect","height","show","clientY","_showOnMouse","setTimeout","hide","_this4","option","attr","value","getAttribute","parseInt"],"mappings":"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","file":"../dist/hide-on-scroll.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// HIDE ON SCROLL\r\n// ==============\r\n\r\n// Constants\r\n// ---------\r\n\r\nconst defaultOptions  = {\r\n    delay: 2000,\r\n    position: 0,\r\n    selector: '.hide-on-scroll'\r\n};\r\n\r\nconst attrDelay       = 'data-hide-delay';\r\nconst attrPosition    = 'data-hide-position';\r\n\r\nconst classHidden     = 'is-hidden-on-scroll';\r\nconst classLocked     = 'is-locked';\r\nconst classNoAnim     = 'no-anim';\r\nconst classTop        = 'at-top';\r\n\r\n// Static Members\r\n// --------------\r\n\r\nlet _instanceCount = 0;\r\nlet _isScrollingUpwards = false;\r\nlet _scrollPosition = window.scrollY || window.pageYOffset;\r\n\r\n// Utility Methods\r\n// ---------------\r\n\r\nfunction assign(target, firstSource) {\r\n    if (target === undefined || target === null) {\r\n        throw new TypeError('Cannot convert first argument to object');\r\n    }\r\n    var to = Object(target);\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var nextSource = arguments[i];\r\n        if (nextSource === undefined || nextSource === null) {\r\n            continue;\r\n        }\r\n        var keysArray = Object.keys(Object(nextSource));\r\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n            var nextKey = keysArray[nextIndex];\r\n            var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\r\n            if (desc !== undefined && desc.enumerable) {\r\n                to[nextKey] = nextSource[nextKey];\r\n            }\r\n        }\r\n    }\r\n    return to;\r\n}\r\n\r\nfunction toggleClass(element, className, force) {\r\n    if (force) {\r\n        element.classList.add(className);\r\n    } else {\r\n        element.classList.remove(className);\r\n    }\r\n}\r\n\r\n// HideOnScroll\r\n// ------------\r\n\r\nexport default class HideOnScroll {\r\n\r\n    static get instanceCount() { return _instanceCount; }\r\n    static get isScrollingUpwards() { return _isScrollingUpwards; }\r\n    static get scrollPosition() { return _isScrollingUpwards; }\r\n\r\n    get items() { return this._items; }\r\n    get options() { return this._options; }\r\n\r\n    constructor (options = {}) {\r\n        // Options\r\n        this._options = assign({}, defaultOptions, options);\r\n        // Items\r\n        this._items = [];\r\n        let nodeList = document.querySelectorAll(this._options.selector);\r\n        for (let i = 0; i < nodeList.length; i++) {\r\n            this._items.push(new HideOnScrollItem(this, nodeList[i]));\r\n        }\r\n        // On Scroll\r\n        if (_instanceCount == 0) {\r\n            window.addEventListener('scroll', (e) => {\r\n                this.refresh(e);\r\n            });\r\n        }\r\n        _instanceCount++;\r\n    }\r\n\r\n    refresh(e) {\r\n        let position = window.scrollY || window.pageYOffset;\r\n        if (position == _scrollPosition) return;\r\n        toggleClass(document.body, classTop, (position <= 0));\r\n        _isScrollingUpwards = (position < _scrollPosition || position <= 0)\r\n        _scrollPosition = position;\r\n        for (let i = 0; i < this._items.length; i++) this._items[i].refresh();\r\n    }\r\n\r\n}\r\n\r\n// HideOnScrollItem\r\n// ----------------\r\n\r\nclass HideOnScrollItem {\r\n\r\n    get element() { return this._element; }\r\n    get options() { return this._options; }\r\n    get parent() { return this._parent; }\r\n\r\n    constructor(parent, element) {\r\n        this._parent = parent;\r\n        this._element = element;\r\n        this._options = assign({}, parent._options);\r\n        this._setOptionInt('delay', attrDelay);\r\n        this._setOptionInt('position', attrPosition);\r\n        this._mouseOver = false;\r\n        if (!(\"ontouchstart\" in document.documentElement)) {\r\n            document.addEventListener('mousemove', (e) => { this.onMouseMove(e) });\r\n            element.addEventListener('mouseenter', () => { this._mouseOver = true });\r\n            element.addEventListener('mouseleave', () => { this._mouseOver = false });\r\n        }\r\n    }\r\n\r\n    clearTimeout() {\r\n        clearTimeout(this._timeoutId);\r\n        this._timeoutId = undefined;\r\n    }\r\n\r\n    hide() {\r\n        if (_scrollPosition <= this._options.position || this._element.classList.contains(classLocked)) return;\r\n        this._timeoutId = undefined;\r\n        this._element.classList.add(classHidden);\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        let y = this._element.getBoundingClientRect().height\r\n        let show = (e.clientY <= y);\r\n        if ((this._showOnMouse != show)) { // state changed\r\n            this._showOnMouse = show;\r\n            if (show) {\r\n                this.clearTimeout();\r\n                this._element.classList.remove(classHidden);\r\n            } else if (this._timeoutId == undefined) {\r\n                this._timeoutId = setTimeout(() => { this.hide() }, this._options.delay);\r\n            }\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        this.clearTimeout();\r\n        this._element.classList.remove(classNoAnim);\r\n        let show = (_isScrollingUpwards || _scrollPosition <= this._options.position || this._element.classList.contains(classLocked) || this._mouseOver);\r\n        if (show) {\r\n            this._element.classList.remove(classHidden);\r\n            if (!this._mouseOver) this._timeoutId = setTimeout(() => { this.hide() }, this._options.delay);\r\n        } else if (this._timeoutId == undefined) {\r\n            this._element.classList.add(classHidden);\r\n        }\r\n    }\r\n\r\n    _setOptionInt(option, attr) {\r\n        let value = this._element.getAttribute(attr);\r\n        if (value) {\r\n            this._options[option] = parseInt(value);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// Globals\r\n// -------\r\n\r\nwindow.HideOnScroll = HideOnScroll;"]}